2025-06-22 16:47:35.252 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-06-22 16:47:35.463 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2025-06-22 16:47:35.468 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-06-22 16:47:35.469 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2025-06-22 16:47:35.470 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-06-22 16:47:35.472 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-06-22 16:47:35.538 +02:00 [INF] Now listening on: http://localhost:5096
2025-06-22 16:47:35.539 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-22 16:47:35.539 +02:00 [INF] Hosting environment: Development
2025-06-22 16:47:35.539 +02:00 [INF] Content root path: /Users/vivekkosare/Development/VehicleInsurance/InsuranceAPI
2025-06-22 16:47:36.731 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5096/weatherforecast - null null
2025-06-22 16:47:36.812 +02:00 [WRN] Failed to determine the https port for redirect.
2025-06-22 16:47:36.819 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5096/weatherforecast - 404 0 null 89.0556ms
2025-06-22 16:47:36.824 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5096/weatherforecast, Response status code: 404
2025-06-22 17:01:26.770 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5096/api/v1/featuretoggles - null null
2025-06-22 17:01:26.778 +02:00 [INF] Executing endpoint 'HTTP: GET /api/v{version:apiVersion}/featuretoggles/'
2025-06-22 17:01:27.046 +02:00 [INF] No data found in cache for key: AllFeatureToggles
2025-06-22 17:01:27.188 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."Description", f."IsEnabled", f."Name", f."UpdatedAt"
FROM "FeatureToggles" AS f
2025-06-22 17:01:27.219 +02:00 [INF] Retrieved 3 feature toggles from the database.
2025-06-22 17:01:27.269 +02:00 [INF] Setting data in cache for key: AllFeatureToggles
2025-06-22 17:01:27.274 +02:00 [INF] Successfully set data in cache for key: AllFeatureToggles
2025-06-22 17:01:27.276 +02:00 [INF] Setting HTTP status code 200.
2025-06-22 17:01:27.280 +02:00 [INF] Writing value of type 'ListSelectIterator`2' as Json.
2025-06-22 17:01:27.294 +02:00 [INF] Executed endpoint 'HTTP: GET /api/v{version:apiVersion}/featuretoggles/'
2025-06-22 17:01:27.297 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5096/api/v1/featuretoggles - 200 null application/json; charset=utf-8 527.5765ms
2025-06-22 17:01:36.755 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5096/api/v1/insurances/ - application/json 223
2025-06-22 17:01:36.757 +02:00 [INF] Executing endpoint 'HTTP: POST /api/v{version:apiVersion}/insurances/'
2025-06-22 17:01:41.763 +02:00 [INF] No data found in cache for key: InsuranceProduct_ca536771-42b8-4f55-8014-7e98c6c7b060
2025-06-22 17:01:41.911 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."Code", i."CreatedAt", i."Discount", i."Name", i."Price", i."UpdatedAt"
FROM "InsuranceProducts" AS i
WHERE i."Id" = @__id_0
LIMIT 1
2025-06-22 17:01:41.924 +02:00 [INF] Insurance product with ID "ca536771-42b8-4f55-8014-7e98c6c7b060" retrieved successfully.
2025-06-22 17:01:41.926 +02:00 [INF] Setting data in cache for key: InsuranceProduct_ca536771-42b8-4f55-8014-7e98c6c7b060
2025-06-22 17:01:41.927 +02:00 [INF] Successfully set data in cache for key: InsuranceProduct_ca536771-42b8-4f55-8014-7e98c6c7b060
2025-06-22 17:01:43.909 +02:00 [INF] Start processing HTTP request GET http://localhost:5059/api/v1/customers/PIN1003
2025-06-22 17:01:43.919 +02:00 [INF] Sending HTTP request GET http://localhost:5059/api/v1/customers/PIN1003
2025-06-22 17:01:44.096 +02:00 [INF] Received HTTP response headers after 173.921ms - 200
2025-06-22 17:01:44.099 +02:00 [INF] End processing HTTP request after 192.1012ms - 200
2025-06-22 17:01:46.863 +02:00 [INF] Start processing HTTP request GET http://localhost:5059/api/v1/vehicles/personal/PIN1003
2025-06-22 17:01:46.863 +02:00 [INF] Sending HTTP request GET http://localhost:5059/api/v1/vehicles/personal/PIN1003
2025-06-22 17:01:46.955 +02:00 [INF] Received HTTP response headers after 91.914ms - 200
2025-06-22 17:01:46.955 +02:00 [INF] End processing HTTP request after 92.3078ms - 200
2025-06-22 17:01:55.029 +02:00 [INF] No data found in cache for key: FeatureToggles_ApplyDiscounts
2025-06-22 17:01:55.109 +02:00 [INF] Executed DbCommand (38ms) [Parameters=[@__names_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."Description", f."IsEnabled", f."Name", f."UpdatedAt"
FROM "FeatureToggles" AS f
WHERE f."Name" = ANY (@__names_0)
2025-06-22 17:01:55.109 +02:00 [INF] Feature toggle(s) with Name(s) ApplyDiscounts retrieved successfully.
2025-06-22 17:01:55.110 +02:00 [INF] Setting data in cache for key: FeatureToggles_ApplyDiscounts
2025-06-22 17:01:55.112 +02:00 [INF] Successfully set data in cache for key: FeatureToggles_ApplyDiscounts
2025-06-22 17:02:00.701 +02:00 [INF] Using PriceCalculator with ApplyDiscounts: true
2025-06-22 17:02:17.275 +02:00 [INF] No data found in cache for key: PIN1003_MUS2021_ca536771-42b8-4f55-8014-7e98c6c7b060
2025-06-22 17:02:17.322 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__insurance_PersonalIdentificationNumber_0='?', @__insurance_InsuredItemIdentity_1='?', @__insurance_InsuranceProductId_2='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."DiscountApplied", i."EndDate", i."InsuranceProductId", i."InsuredItemIdentity", i."PersonalIdentificationNumber", i."Price", i."StartDate", i."UpdatedAt", i0."Id", i0."Code", i0."CreatedAt", i0."Discount", i0."Name", i0."Price", i0."UpdatedAt"
FROM "Insurances" AS i
INNER JOIN "InsuranceProducts" AS i0 ON i."InsuranceProductId" = i0."Id"
WHERE i."PersonalIdentificationNumber" = @__insurance_PersonalIdentificationNumber_0 AND i."InsuredItemIdentity" = @__insurance_InsuredItemIdentity_1 AND i."InsuranceProductId" = @__insurance_InsuranceProductId_2
LIMIT 1
2025-06-22 17:02:17.323 +02:00 [WRN] Attempted to set null value in cache for key: PIN1003_MUS2021_ca536771-42b8-4f55-8014-7e98c6c7b060
2025-06-22 17:02:17.406 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Boolean), @p2='?' (DbType = DateTime), @p3='?' (DbType = Guid), @p4='?', @p5='?', @p6='?' (DbType = Decimal), @p7='?' (DbType = DateTime), @p8='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Insurances" ("Id", "DiscountApplied", "EndDate", "InsuranceProductId", "InsuredItemIdentity", "PersonalIdentificationNumber", "Price", "StartDate", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "CreatedAt";
2025-06-22 17:02:17.439 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."DiscountApplied", i."EndDate", i."InsuranceProductId", i."InsuredItemIdentity", i."PersonalIdentificationNumber", i."Price", i."StartDate", i."UpdatedAt"
FROM "Insurances" AS i
WHERE i."Id" = @__p_0
LIMIT 1
2025-06-22 17:02:17.442 +02:00 [INF] Insurance with ID "01979829-5dfb-70c0-b5bd-8dd44cb19f4d" created successfully.
2025-06-22 17:02:17.442 +02:00 [INF] Insurance with ID "01979829-5dfb-70c0-b5bd-8dd44cb19f4d" added successfully.
2025-06-22 17:02:17.444 +02:00 [INF] Setting HTTP status code 201.
2025-06-22 17:02:17.448 +02:00 [INF] Writing value of type 'InsuranceOutput' as Json.
2025-06-22 17:02:17.451 +02:00 [INF] Executed endpoint 'HTTP: POST /api/v{version:apiVersion}/insurances/'
2025-06-22 17:02:17.452 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5096/api/v1/insurances/ - 201 null application/json; charset=utf-8 40697.0604ms
2025-06-22 17:03:48.240 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5096/api/v1/insurances - null null
2025-06-22 17:03:48.270 +02:00 [INF] Executing endpoint 'HTTP: GET /api/v{version:apiVersion}/insurances/'
2025-06-22 17:03:48.274 +02:00 [INF] No data found in cache for key: AllInsurances
2025-06-22 17:03:48.286 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."DiscountApplied", i."EndDate", i."InsuranceProductId", i."InsuredItemIdentity", i."PersonalIdentificationNumber", i."Price", i."StartDate", i."UpdatedAt", i0."Id", i0."Code", i0."CreatedAt", i0."Discount", i0."Name", i0."Price", i0."UpdatedAt"
FROM "Insurances" AS i
INNER JOIN "InsuranceProducts" AS i0 ON i."InsuranceProductId" = i0."Id"
2025-06-22 17:03:48.290 +02:00 [INF] Retrieved 5 insurances from the database.
2025-06-22 17:03:48.293 +02:00 [INF] Setting data in cache for key: AllInsurances
2025-06-22 17:03:48.294 +02:00 [INF] Successfully set data in cache for key: AllInsurances
2025-06-22 17:03:48.295 +02:00 [INF] Fetching car registrations for personal identification numbers: PIN1001, PIN1002, PIN1003
2025-06-22 17:03:48.301 +02:00 [INF] Start processing HTTP request POST http://localhost:5059/api/v1/vehicles/personal/
2025-06-22 17:03:48.301 +02:00 [INF] Sending HTTP request POST http://localhost:5059/api/v1/vehicles/personal/
2025-06-22 17:03:48.392 +02:00 [INF] Received HTTP response headers after 90.3776ms - 200
2025-06-22 17:03:48.392 +02:00 [INF] End processing HTTP request after 90.668ms - 200
2025-06-22 17:03:48.394 +02:00 [INF] Retrieved 3 car insurances with details.
2025-06-22 17:03:48.394 +02:00 [INF] Setting HTTP status code 200.
2025-06-22 17:03:48.394 +02:00 [INF] Writing value of type 'Concat2Iterator`1' as Json.
2025-06-22 17:03:48.396 +02:00 [INF] Executed endpoint 'HTTP: GET /api/v{version:apiVersion}/insurances/'
2025-06-22 17:03:48.396 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5096/api/v1/insurances - 200 null application/json; charset=utf-8 157.666ms
